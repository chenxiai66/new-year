<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>æ–°æ˜¥ç¥ç¦æ¸¸æˆ</title>
    <style>
        body { margin: 0; overflow: hidden; background: #ffe6e6; }
        .container { position: relative; height: 100vh; }
        
        /* ç¬¬ä¸€ç¯èŠ‚æ ·å¼ */
        .word {
            position: absolute;
            font-family: 'åæ–‡è¡Œæ¥·';
            font-size: 24px;
            padding: 8px;
            border: 2px solid #ff3366;
            border-radius: 20px;
            animation: fall 3s linear;
        }
        @keyframes fall {
            from { top: -50px; }
            to { top: 100vh; }
        }
        
        /* ç¬¬äºŒç¯èŠ‚æ ·å¼ */
        #stage2 { display: none; }
        .wish-box {
            text-align: center;
            margin-top: 20%;
            font-family: 'åæ–‡å½©äº‘';
        }
        .firework {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            animation: explode 1s;
        }
        @keyframes explode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(5); opacity: 0; }
        }
        .snake {
            position: fixed;
            bottom: 10px;
            right: 20px;
            font-size: 60px;
        }
    </style>
</head>
<body>
    <!-- ç¬¬ä¸€ç¯èŠ‚ -->
    <div id="stage1" class="container">
        <div id="score" style="position:fixed;top:10px;left:10px;font-size:24px;">å¾—åˆ†ï¼š0</div>
        <div id="timer" style="position:fixed;top:10px;right:10px;font-size:24px;">10</div>
        <div id="rules" style="position:fixed;bottom:10px;text-align:center;width:100%">
            æ¸¸æˆè§„åˆ™ï¼šç‚¹å‡»ç¥ç¦è¯å¾—åˆ†ï¼ˆ2/4å­—ï¼‰ï¼Œ10ç§’å†…å¾—5åˆ†é€šå…³
        </div>
    </div>

    <!-- ç¬¬äºŒç¯èŠ‚ -->
    <div id="stage2" class="container">
        <div style="background:#ff9999;padding:10px;text-align:center">
            ç”Ÿç”Ÿä¸æ¯ï¼Œäº‹äº‹å¦‚æ„
        </div>
        <div class="wish-box">
            <button id="wishBtn" style="padding:15px;font-size:20px">ç‚¹å‡»è®¸æ„¿</button>
            <div id="result" style="margin-top:20px;font-size:28px"></div>
        </div>
        <div class="snake">ğŸ</div>
        <div id="blessing" style="position:fixed;bottom:50px;width:100%;text-align:center"></div>
    </div>

<script>
// ç¬¬ä¸€ç¯èŠ‚é€»è¾‘
const blessings = ['å‡èŒåŠ è–ª','è´¢æºå¹¿è¿›','æ­¥æ­¥é«˜å‡','å¿ƒæƒ³äº‹æˆ','é˜–å®¶æ¬¢ä¹',
                  'å¹¸ç¦å®‰åº·','å‰æ˜Ÿé«˜ç…§','ä¸‡äº‹å¦‚æ„','å››å­£å¹³å®‰','äº”ç¦ä¸´é—¨'];
const normals = ['åŠ ç­','ç†¬å¤œ','å µè½¦','è¿Ÿåˆ°','å‹åŠ›','å¼€ä¼š','æ•…éšœ','æ’é˜Ÿ','ç­‰å¾…','ä¿®æ”¹'];

let score = 0, time = 10;
const timerEl = document.getElementById('score');
const gameTimer = setInterval(() => {
    time--;
    document.getElementById('timer').textContent = time;
    if(time <= 0) endGame();
}, 1000);

// ç”Ÿæˆè¯è¯­
const interval = setInterval(createWord, 330);
function createWord() {
    const word = document.createElement('div');
    word.className = 'word';
    word.style.left = Math.random() * 90 + '%';
    const isBless = Math.random() > 0.4;
    word.textContent = isBless ? 
        blessings[Math.floor(Math.random()*10)] : 
        normals[Math.floor(Math.random()*10)];
    
    word.onclick = () => {
        if(isBless) {
            score++;
            timerEl.textContent = 'å¾—åˆ†ï¼š' + score;
            word.style.backgroundColor = '#ffcccc';
        }
        word.style.animation = 'none';
        setTimeout(() => word.remove(), 500);
    };
    document.getElementById('stage1').appendChild(word);
}

function endGame() {
    clearInterval(interval);
    clearInterval(gameTimer);
    document.querySelectorAll('.word').forEach(w => w.remove());
    const result = score >=5 ? 
        'æ­å–œé€šå…³ï¼Œè¿›å…¥ç¬¬äºŒä¸ªç¯èŠ‚' : 'å†æ¥å†å‰';
    alert(result);
    if(score >=5) {
        document.getElementById('stage1').style.display = 'none';
        document.getElementById('stage2').style.display = 'block';
    }
}

// ç¬¬äºŒç¯èŠ‚é€»è¾‘
const wishes = [...blessings, 'è›‡å¹´å¤§å‰','é‡‘è›‡ç‹‚èˆ','çµè›‡çº³ç¦','ç¦è¿å¸¸ä¸´','å‰åº†æœ‰ä½™'];
document.getElementById('wishBtn').onclick = function() {
    this.disabled = true;
    let count = 0;
    const anim = setInterval(() => {
        document.getElementById('result').textContent = 
            wishes[Math.floor(Math.random()*20)];
        if(++count === 30) {
            clearInterval(anim);
            showFinal();
        }
    }, 100);
};

function showFinal() {
    document.getElementById('result').innerHTML = 
        'ä¸Šä¸Šç­¾ï¼š' + wishes[Math.floor(Math.random()*20)];
    setTimeout(() => {
        document.getElementById('blessing').innerHTML = 
            'ç§‰é›¯æ­ç¥æ‚¨æ–°æ˜¥ä¸‡äº‹å¤§å‰ï¼Œå¹³å®‰å–œä¹ï¼Œæ‰€æ±‚çš†æ‰€å¾—';
    }, 2500);
    
    // çƒŸèŠ±æ•ˆæœ
    setInterval(() => {
        const fw = document.createElement('div');
        fw.className = 'firework';
        fw.style.left = Math.random() * 90 + '%';
        fw.style.top = Math.random() * 90 + '%';
        document.body.appendChild(fw);
        setTimeout(() => fw.remove(), 1000);
    }, 300);
}
</script>
</body>
</html>