<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°æ˜¥ç¥ç¦æ¸¸æˆ</title>
    <style>
        body {
            margin: 0;
            background-color: #ffe6e6;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        .header, .footer {
            position: fixed;
            width: 100%;
            background: rgba(255,230,230,0.9);
            padding: 10px;
            text-align: center;
            z-index: 100;
        }
        .header { top: 0; }
        .footer { bottom: 0; }
        #gameArea {
            height: 80vh;
            margin: 60px 0;
            position: relative;
            overflow: hidden;
        }
        .word {
            position: absolute;
            cursor: pointer;
            font-size: 24px;
            transition: transform 0.1s;
        }
        #result {
            text-align: center;
            padding: 20px;
        }
        #wishResult {
            font-size: 32px;
            color: #c00;
            margin: 20px;
        }
        .firework {
            position: absolute;
            width: 10px;
            height: 10px;
            background: gold;
            animation: explode 1s infinite;
        }
        @keyframes explode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- ç¬¬ä¸€ç¯èŠ‚ -->
    <div id="stage1">
        <div class="header">æ–°æ˜¥ç¥ç¦æ”¶é›†</div>
        <div id="gameArea"></div>
        <div class="footer">
            æ¸¸æˆè§„åˆ™ï¼šç‚¹å‡»ç¥ç¦è¯æ±‡å¾—1åˆ†ï¼Œæ™®é€šè¯æ±‡ä¸å¾—åˆ†<br>
            æ—¶é—´10ç§’ï¼Œè¾¾åˆ°5åˆ†å³å¯è¿›å…¥ä¸‹ä¸€ç¯èŠ‚
        </div>
    </div>

    <!-- ç¬¬ä¸‰ç¯èŠ‚ -->
    <div id="stage3" style="display:none;">
        <div class="header">ç”Ÿç”Ÿä¸æ¯ï¼Œäº‹äº‹å¦‚æ„</div>
        <div id="wishArea" style="text-align:center;padding:50px 0">
            <button id="wishBtn" style="font-size:24px;padding:15px">ç«‹å³è®¸æ„¿</button>
            <div id="wishResult"></div>
            <div id="finalWish" style="opacity:0;transition:opacity 2s;"></div>
        </div>
        <div class="footer">è›‡å¹´è¿›è¡Œæ—¶</div>
    </div>

<script>
// ç¬¬ä¸€ç¯èŠ‚æ•°æ®
const blessings = ['ç¦æ˜Ÿé«˜ç…§', 'ä¸‡äº‹å¦‚æ„', 'æ­å–œå‘è´¢', 'å‰ç¥¥å¦‚æ„', 'å¹´å¹´æœ‰ä½™', 
                  'å¿ƒæƒ³äº‹æˆ', 'é˜–å®¶æ¬¢ä¹', 'æ­¥æ­¥é«˜å‡', 'å¥åº·é•¿å¯¿', 'é‡‘ç‰æ»¡å ‚'];
const normalWords = ['åƒé¥­', 'ç¡è§‰', 'å·¥ä½œ', 'å¼€ä¼š', 'æ´—è¡£', 'æ‰«åœ°', 'å¿«é€’', 'å µè½¦', 'æ’é˜Ÿ', 'ç¼´è´¹'];

// ç¬¬ä¸‰ç¯èŠ‚æ•°æ®
const wishes = new Array(19).fill('å¤§å‰å¤§åˆ©').concat(['ä¸Šä¸Šç­¾']);
wishes.push('è›‡å¹´å‰ç¥¥','è´¢æºå¹¿è¿›','ç¦å¯¿å®‰åº·','ä¸‡äº‹é¡ºé‚','å‰æ˜Ÿé«˜ç…§','å¹¸ç¦ç¾æ»¡');

let score = 0;
let gameActive = false;

// ç¬¬ä¸€ç¯èŠ‚æ¸¸æˆé€»è¾‘
function startGame() {
    gameActive = true;
    score = 0;
    const gameArea = document.getElementById('gameArea');
    
    const timer = setInterval(() => {
        if (!gameActive) return;
        createWord();
    }, 800);

    setTimeout(() => {
        gameActive = false;
        clearInterval(timer);
        showResult();
    }, 10000);
}

function createWord() {
    const word = document.createElement('div');
    const isBlessing = Math.random() > 0.4;
    word.className = 'word';
    word.style.left = Math.random() * 90 + '%';
    word.style.top = '-50px';
    word.textContent = isBlessing 
        ? blessings[Math.floor(Math.random()*blessings.length)]
        : normalWords[Math.floor(Math.random()*normalWords.length)];
    
    word.onclick = () => {
        if (!gameActive) return;
        if (isBlessing) score++;
        word.style.transform = 'scale(1.5)';
        setTimeout(() => word.remove(), 200);
    };
    
    gameArea.appendChild(word);
    animateWord(word);
}

function animateWord(element) {
    let pos = -50;
    const move = () => {
        pos += 3;
        element.style.top = pos + 'px';
        if (pos < window.innerHeight) requestAnimationFrame(move);
        else element.remove();
    }
    requestAnimationFrame(move);
}

function showResult() {
    const result = document.getElementById('result');
    document.getElementById('stage1').style.display = 'none';
    document.getElementById('stage3').style.display = 'block';
    if (score > 5) {
        startWishGame();
    }
}

// ç¬¬ä¸‰ç¯èŠ‚æ¸¸æˆé€»è¾‘
function startWishGame() {
    let count = 0;
    const wishBtn = document.getElementById('wishBtn');
    const finalWish = document.getElementById('finalWish');
    
    wishBtn.onclick = () => {
        wishBtn.disabled = true;
        const interval = setInterval(() => {
            document.getElementById('wishResult').textContent = 
                wishes[Math.floor(Math.random()*wishes.length)];
        }, 50);

        setTimeout(() => {
            clearInterval(interval);
            const final = wishes[Math.floor(Math.random()*wishes.length)];
            document.getElementById('wishResult').innerHTML = 
                final === 'ä¸Šä¸Šç­¾' ? 'ğŸ‰ä¸Šä¸Šç­¾ğŸ‰' : final;
            
            setTimeout(() => {
                finalWish.style.opacity = 1;
                finalWish.innerHTML = 'ç§‰é›¯æ­ç¥æ‚¨æ–°æ˜¥ä¸‡äº‹å¤§å‰ï¼Œå¹³å®‰å–œä¹ï¼Œæ‰€æ±‚çš†æ‰€å¾—';
            }, 3000);

            // æ·»åŠ çƒŸèŠ±æ•ˆæœ
            setInterval(createFirework, 300);
        }, 3000);
    };
}

function createFirework() {
    const firework = document.createElement('div');
    firework.className = 'firework';
    firework.style.left = Math.random() * 90 + '%';
    firework.style.top = Math.random() * 90 + '%';
    document.body.appendChild(firework);
    setTimeout(() => firework.remove(), 1000);
}

// å¼€å§‹æ¸¸æˆ
startGame();
</script>
</body>
</html>